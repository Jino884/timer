<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 36px;
      text-align: center;
      margin-top: 20vh;
    }
    #timer {
      margin-bottom: 20px;
    }
    #notice {
      font-size: 20px;
      transition: color 0.3s ease;
    }
  </style>
</head>
<body>
  <div id="timer">00:00</div>
  <p id="notice"></p>

 <script>
  const params = new URLSearchParams(window.location.search);
  const total = parseInt(params.get("duration")) || 240; // default = 4 minutes
  const start = Date.now();
  let warned = false; // üî∏ ‡∏Å‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏ã‡πâ‡∏≥

  function update() {
    const elapsed = Math.floor((Date.now() - start) / 1000);
    const remaining = Math.max(0, total - elapsed);

    const m = String(Math.floor(remaining / 60)).padStart(2, '0');
    const s = String(remaining % 60).padStart(2, '0');
    document.getElementById("timer").textContent = `${m}:${s}`;

    const noticeEl = document.getElementById("notice");

    // Reset ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
    noticeEl.textContent = "";
    noticeEl.style.color = "";

    // ‚úÖ ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤)
    if (remaining <= 60 && remaining > 0 && !warned) {
      noticeEl.textContent = "You have 1 minute left to complete your answer. Please submit as soon as possible.";
      noticeEl.style.color = "orange";
      warned = true;
    }

    // ‚úÖ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß
    if (remaining === 0) {
      noticeEl.textContent = "You have exceeded the time limit. Please submit your answer.";
      noticeEl.style.color = "red";
    }

    if (remaining > 0) {
      requestAnimationFrame(update);
    }
  }

  update();
</script>
</body>
</html>
